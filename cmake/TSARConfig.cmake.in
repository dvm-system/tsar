set(TSAR_DESCRIPTION "@TSAR_DESCRIPTION@")
set(TSAR_HOMEPAGE_URL "@TSAR_HOMEPAGE_URL@")

set(TSAR_LLVM_VERSION @LLVM_VERSION@)

set(TSAR_ENABLE_FORTRAN "@FLANG_FOUND@")

set(TSAR_INCLUDE_SUFFIX "@TSAR_INCLUDE_PATH@")

# Set list of extenal tools, such as clang or llvm-link, available
# from TSAR distribution.
set(TSAR_LLVM_TOOLS @TSAR_LLVM_TOOLS@)

set(TSAR_EXECUTABLE)
set(TSAR_BINARY_DIR)
set(TSAR_INCLUDE_PATH)
set(TSAR_SERVER_EXECUTABLE)

# If target 'tsar' exists and TSARExports.cmake has not been loaded yet,
# we are in the configuration step inside the TSAR build tree. It means
# that properties for 'tsar' have not been set yet.
if (NOT TARGET tsar AND EXISTS ${CMAKE_CURRENT_LIST_DIR}/TSARExports.cmake)
  set(TSAR_EXPORT ON)
  include(${CMAKE_CURRENT_LIST_DIR}/TSARExports.cmake)

  get_property(TSAR_CONFIGURATIONS TARGET tsar PROPERTY IMPORTED_CONFIGURATIONS)
  foreach(TC ${TSAR_CONFIGURATIONS})
    string(TOUPPER ${TC} TC_SUFFIX)
    get_property(TSAR_EXECUTABLE_${TC_SUFFIX}
      TARGET tsar PROPERTY IMPORTED_LOCATION_${TC_SUFFIX})
    if (TARGET tsar-server)
      get_property(TSAR_SERVER_EXECUTABLE_${TC_SUFFIX}
        TARGET tsar-server PROPERTY IMPORTED_LOCATION_${TC_SUFFIX})
    endif()
    get_filename_component(TSAR_BINARY_DIR_${TC_SUFFIX} ${TSAR_EXECUTABLE_${TC_SUFFIX}} DIRECTORY)
    if (TSAR_INCLUDE_SUFFIX)
      get_filename_component(TSAR_INCLUDE_PATH_${TC_SUFFIX} ${TSAR_BINARY_DIR_${TC_SUFFIX}}/../@TSAR_INCLUDE_PATH@ ABSOLUTE)
    endif()
  endforeach()

  list(LENGTH TSAR_CONFIGURATIONS TSAR_CONFIGURATIONS_LENGTH)
  if (TSAR_CONFIGURATIONS_LENGTH EQUAL 1)
    list(GET TSAR_CONFIGURATIONS 0 TSAR_CONFIGURATION)
    string(TOUPPER ${TSAR_CONFIGURATION} TC_SUFFIX)
    get_property(TSAR_EXECUTABLE
      TARGET tsar PROPERTY IMPORTED_LOCATION_${TC_SUFFIX})
    if (TARGET tsar-server)
      get_property(TSAR_SERVER_EXECUTABLE
        TARGET tsar-server PROPERTY IMPORTED_LOCATION_${TC_SUFFIX})
    endif()
    get_filename_component(TSAR_BINARY_DIR ${TSAR_EXECUTABLE_${TC_SUFFIX}} DIRECTORY)
    if (TSAR_INCLUDE_SUFFIX)
      get_filename_component(TSAR_INCLUDE_PATH ${TSAR_BINARY_DIR_${TC_SUFFIX}}/../@TSAR_INCLUDE_PATH@ ABSOLUTE)
    endif()
  elseif (NOT TSAR_CONFIGURATIONS)
    get_property(TSAR_EXECUTABLE TARGET tsar PROPERTY IMPORTED_LOCATION)
    if (TARGET tsar-server)
      get_property(TSAR_SERVER_EXECUTABLE TARGET tsar-server PROPERTY IMPORTED_LOCATION)
    endif()
    get_filename_component(TSAR_BINARY_DIR ${TSAR_EXECUTABLE} DIRECTORY)
    if (TSAR_INCLUDE_SUFFIX)
      get_filename_component(TSAR_INCLUDE_PATH ${TSAR_BINARY_DIR}/../@TSAR_INCLUDE_PATH@ ABSOLUTE)
    endif()
  endif()
else()
  set(TSAR_EXPORT OFF)

  set(TSAR_CONFIGURATIONS)
  foreach(C ${CMAKE_CONFIGURATION_TYPES})
    string(TOUPPER ${C} TC_SUFFIX)
    list(APPEND TSAR_CONFIGURATIONS ${TC_SUFFIX})
  endforeach()
  foreach(TC ${TSAR_CONFIGURATIONS})
    string(TOUPPER ${TC} TC_SUFFIX)
    set(TSAR_EXECUTABLE_${TC_SUFFIX} ${CMAKE_CURRENT_LIST_DIR}/${TC}/@TSAR_EXECUTABLE@)
    if (TSAR_SERVER)
      set(TSAR_SERVER_EXECUTABLE_${TC_SUFFIX} ${CMAKE_CURRENT_LIST_DIR}/${TC}/@TSAR_SERVER_EXECUTABLE@)
    endif()
    get_filename_component(TSAR_BINARY_DIR_${TC_SUFFIX} ${TSAR_EXECUTABLE_${TC_SUFFIX}} DIRECTORY)
    if (TSAR_INCLUDE_SUFFIX)
      get_filename_component(TSAR_INCLUDE_PATH_${TC_SUFFIX} ${TSAR_BINARY_DIR_${TC_SUFFIX}}/../@TSAR_INCLUDE_PATH@ ABSOLUTE)
    endif()
  endforeach()

  list(LENGTH TSAR_CONFIGURATIONS TSAR_CONFIGURATIONS_LENGTH)
  if (TSAR_CONFIGURATIONS_LENGTH EQUAL 1)
    list(GET TSAR_CONFIGURATIONS 0 TSAR_CONFIGURATION)
    string(TOUPPER ${TSAR_CONFIGURATION} TC_SUFFIX)
    set(TSAR_EXECUTABLE_${TC_SUFFIX} ${CMAKE_CURRENT_LIST_DIR}/${TSAR_CONFIGURATION}/@TSAR_EXECUTABLE@)
    if (TSAR_SERVER)
      set(TSAR_SERVER_EXECUTABLE_${TC_SUFFIX} ${CMAKE_CURRENT_LIST_DIR}/${TSAR_CONFIGURATION}/@TSAR_SERVER_EXECUTABLE@)
    endif()
    get_filename_component(TSAR_BINARY_DIR_${TC_SUFFIX} ${TSAR_EXECUTABLE_${TC_SUFFIX}} DIRECTORY)
    if (TSAR_INCLUDE_SUFFIX)
      get_filename_component(TSAR_INCLUDE_PATH_${TC_SUFFIX} ${TSAR_BINARY_DIR_${TC_SUFFIX}}/../@TSAR_INCLUDE_PATH@ ABSOLUTE)
    endif()
  elseif (NOT TSAR_CONFIGURATIONS)
    set(TSAR_EXECUTABLE ${CMAKE_CURRENT_LIST_DIR}/@TSAR_EXECUTABLE@)
    if (TSAR_SERVER)
      set(TSAR_SERVER_EXECUTABLE ${CMAKE_CURRENT_LIST_DIR}/@TSAR_SERVER_EXECUTABLE@)
    endif()
    get_filename_component(TSAR_BINARY_DIR ${TSAR_EXECUTABLE} DIRECTORY)
    if (TSAR_INCLUDE_SUFFIX)
      get_filename_component(TSAR_INCLUDE_PATH ${TSAR_BINARY_DIR}/../@TSAR_INCLUDE_PATH@ ABSOLUTE)
    endif()
  endif()
endif()
